language: java

jdk:
  - oraclejdk8

os:
  - linux

# The build and tests are executed directly by gradle
script:
  - gradle build javadoc
  - .build/prepare_pages.sh
# Caching
before_cache:
  - rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
  - rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
    - $HOME/.gradle/caches/
    - $HOME/.gradle/wrapper/
deploy:
  provider: pages
  local-dir: pages
  skip-cleanup: true
  github-token: $GITHUB_TOKEN
  keep-history: true
  verbose: true
  on:
    condition: true
  #  branch: develop
