//project.version = '0.7.0'+'-'+ timestamp+ '-SNAPSHOT'

apply plugin: 'java'
apply plugin:'application'

sourceCompatibility = 1.6
targetCompatibility = 1.6

ext {
    keyple_v = project.hasProperty("keyple_version") ? keyple_version : '+'
}

jar {
    manifest {
        attributes 'Implementation-Title': 'Keyple Example Remote SE',
                'Implementation-Version': project.version
    }
}


mainClassName = 'org.eclipse.keyple.example.remote.application.Demo_WebserviceWithRetrofit_MasterServer'

compileJava.doFirst {
    println project.name + " - Using keyple_version parameter with value " + keyple_v
}

dependencies {
    //import the last version of keyple-java-core
    implementation group: 'org.eclipse.keyple', name: 'keyple-java-core', version: keyple_v

    //import the last version of keyple-java-calypso
    implementation group: 'org.eclipse.keyple', name: 'keyple-java-calypso', version: keyple_v

    //import the last version of keyple-java-plugin-stub
    implementation group: 'org.eclipse.keyple', name: 'keyple-java-plugin-stub', version: keyple_v

    //import the last version of keyple-java-plugin-remotese
    implementation group: 'org.eclipse.keyple', name: 'keyple-java-plugin-remotese', version: keyple_v

    implementation project(path: ':calypso:example-calypso-pc')

    implementation project(path: ':calypso:example-calypso-common')

    implementation "org.java-websocket:Java-WebSocket:${JavaWebSocket_version}"

    runtime "org.slf4j:slf4j-simple:${slf4jsimple_version}"

    implementation "com.google.code.gson:gson:${gson_version}"
    
    implementation "com.squareup.retrofit2:retrofit:${retrofit_version}"
    implementation "com.squareup.retrofit2:converter-gson:${retrofit_version}"
    
    /*
    Tests
     */

    // https://mvnrepository.com/artifact/junit/junit
    testImplementation "junit:junit:${junit_version}"

    // https://mvnrepository.com/artifact/org.mockito/mockito-core
    testImplementation "org.mockito:mockito-core:${mockitocore_version}"
}

test {
    exclude 'org/eclipse/**'
}
